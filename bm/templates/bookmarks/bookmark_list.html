{% extends "layout.html" %}
{% load humanize %}
{% load markup %}

{% block title %}
{% if specified_user %}{{ specified_user }}'s {% endif %}Bookmarks
{% endblock %}

{% block content %}
<h2>{% if specified_user %}{{ specified_user }}'s {% else %}Your {% endif %}Bookmarks</h2>

{% if request.GET.tag %}
<h4><a class="close pull-left" href="{{ request.path }}">&times;</a> &nbsp; Tag: {{ request.GET.tag }}</h4>
{% endif %}

<div id="bookmark-list">
{% if object_list %}
    {% for bookmark in object_list %}
    <div class="bookmark{% if bookmark.private %} private-bookmark{% endif %}">
        <h1><a href="{{ bookmark.url }}">{{ bookmark.title }}</a></h1>
        {% if bookmark.category.name == 'Bookmark' %}
        {{ bookmark.notes|markdown:"safe" }}
        {% else %}
        {{ bookmark.notes|truncatewords:10}}
        {% endif %}
        <h3>
            {% if bookmark.tags.all %}
            <i class="fa fa-tag"></i>
            {% for tag in bookmark.tags.all %} <a href="{{ request.path }}?tag={{ tag }}">{{ tag }}</a> {% endfor %}
            {% endif %}
        </h3>
        <h4>
            <span class="bookmark-list-date" title="{{ bookmark.create_date|date:"m/d/Y h:i a" }} (UTC)">{{ bookmark.create_date|naturaltime }}</span>
            {% if bookmark.user == user %}
            <a href="{% url bookmark_update bookmark.id %}">Edit</a>
            {% endif %}
        </h4>
    </div>
    {% endfor %}
{% else %}
    <p>No bookmarks yet.</p>
{% endif %}
</div>

{% endblock %}
